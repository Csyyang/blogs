<template>
  <div id="rotation">
    <div ref="picBox" class="content">
      <div class="img-box" v-for="item in imgArray" :key="item">
        <img :src="item">
        <span></span>
      </div>
    </div>
    <div class="anchor-box">
      <div :class="[picIndex === index?'div-checked':'']" v-for="(item,index) in imgArray" :key="item" @click="changeImg(index)">
        <svg t="1605854309663" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3450" width="20" height="20">
          <path
            d="M875.36 620.96l-0.96-9.6c0-1.44-0.48-3.36-0.96-6.24-0.48-5.76-1.44-11.52-2.4-16.8-0.48-4.32-1.44-8.64-2.4-12.96l-1.44-6.24c-21.6-101.28-82.56-219.36-181.92-351.36-72-95.52-139.68-164.64-143.04-168.48 0 0-3.84-3.36-7.68-6.24-11.04-8.64-26.4-8.16-37.44 0-3.84 2.88-7.68 6.24-8.64 7.68-7.2 7.2-72 74.4-142.08 167.04-99.36 132-160.8 250.08-181.92 350.4l-1.44 6.72c-0.96 4.32-1.92 8.64-2.4 12.48-0.96 5.76-1.92 11.52-2.4 16.8v1.92c0 1.44-0.48 3.36-0.48 4.8l-0.96 10.56c-0.48 7.68-0.96 15.84-0.96 24v12c0 3.84 0 7.68 0.48 11.04 0.48 4.8 0.96 10.08 1.44 15.36l0.96 7.68c0.96 5.76 1.92 11.52 2.88 16.8l1.44 6.24c1.44 5.76 2.88 11.52 4.32 16.8 0.48 2.4 1.44 4.32 1.92 6.24 1.44 5.28 3.36 10.56 5.28 15.84 0.96 2.4 1.92 5.28 2.88 7.68 1.92 4.8 3.84 9.12 5.76 13.92 1.44 2.88 2.88 6.24 4.8 9.6l2.4 5.28c0.96 2.4 2.4 4.32 3.36 6.72 3.84 6.72 7.2 12.96 11.52 19.2l0.96 1.92c5.76 8.64 12 17.28 19.2 26.4l2.88 3.36c6.72 8.16 13.44 15.84 21.6 24 7.68 7.68 15.84 14.88 24 22.08l3.84 2.88c6.72 5.28 13.44 10.56 22.08 16.32l5.28 3.84c7.2 4.8 14.88 9.12 24 14.4l3.84 2.4c2.4 1.44 5.28 2.4 8.16 3.84l6.24 2.88c5.28 2.88 10.56 5.28 16.32 7.68 5.28 2.4 10.56 4.32 15.84 6.24l7.2 2.88c2.88 0.96 5.76 2.4 8.64 3.36 7.68 2.4 15.36 4.32 22.56 6.24l4.32 0.96c2.4 0.48 4.32 1.44 6.24 1.44 8.16 1.92 16.32 3.36 23.04 4.32l3.36 0.48c2.4 0.48 5.28 0.96 8.16 1.44 7.2 0.96 13.92 1.44 21.12 1.92l3.84 0.48c3.36 0.48 6.72 0.48 10.56 0.96h36c3.36 0 6.72-0.48 10.08-0.96l3.84-0.48c7.2-0.48 13.92-1.44 21.12-1.92 2.88-0.48 5.28-0.96 8.16-1.44l3.36-0.48c7.2-1.44 14.88-2.4 23.04-4.32 2.4-0.48 4.8-1.44 7.2-1.92l3.36-0.96c7.2-1.92 15.36-3.84 22.56-6.24 2.88-0.96 6.24-1.92 8.64-3.36l7.2-2.88c5.28-1.92 10.56-3.84 15.84-6.24 5.76-2.4 11.04-4.8 16.32-7.68l6.24-2.88c2.4-0.96 4.8-2.4 7.68-3.84l5.76-3.36c7.68-4.32 14.88-8.64 22.56-13.44 2.4-1.44 4.8-3.36 7.2-4.8 7.2-4.8 13.92-10.08 20.64-15.36l1.92-1.44 2.4-1.92c8.16-6.72 16.32-13.92 23.52-21.6l1.44-1.44c6.72-6.72 13.44-14.4 20.64-23.04l2.4-3.36c7.2-9.12 13.44-17.76 19.2-26.4l0.96-1.92c4.32-6.72 8.16-12.96 11.52-19.2 1.44-2.4 2.4-4.8 3.84-7.2l2.4-4.32c1.44-3.36 2.88-6.24 4.8-9.6 1.92-4.8 3.84-9.12 5.76-13.92l2.88-7.68c1.92-5.28 3.84-10.56 5.28-15.84l1.92-6.24c1.44-5.76 2.88-11.04 4.32-17.28l1.44-5.76c0.96-5.76 2.4-11.52 2.88-16.8 0.48-1.92 0.48-3.84 0.48-5.76l0.48-3.84c0.48-4.8 0.96-9.12 1.44-13.92 0-3.36 0.48-7.2 0.48-10.56v-6.24-6.72c-1.44-6.24-1.92-14.4-2.4-23.04z m-66.24 75.84l-0.96 4.8c-0.96 4.32-2.4 9.12-3.36 13.44l-1.44 4.8c-1.44 4.32-2.88 8.64-4.32 12.48l-2.4 6.24c-1.44 3.84-2.88 7.2-4.8 11.04-1.44 2.4-2.4 4.8-3.84 7.2l-2.4 4.8c-0.96 1.44-1.44 3.36-2.4 5.28-2.88 5.28-5.76 10.56-10.08 16.8-4.32 6.72-9.6 13.92-15.84 21.6l-2.4 2.88c-5.76 6.72-11.04 12.96-17.76 19.68-6.24 6.24-12.48 12-19.2 17.28l-3.84 2.88c-5.28 4.32-11.04 8.64-16.8 12.48l-5.76 3.84-18.72 11.52-4.32 2.4c-1.44 0.48-2.4 1.44-4.32 1.92-1.92 0.96-3.36 1.44-5.28 2.4l-3.84 1.92c-3.84 1.92-7.68 3.84-12 5.76-4.32 1.92-8.64 3.36-12.48 4.8l-8.64 3.36c-1.92 0.48-3.84 1.44-5.76 1.92-5.76 1.92-11.52 3.36-19.2 5.28l-4.8 1.44c-1.44 0.48-2.4 0.48-3.84 0.96-6.24 1.44-12.96 2.4-19.68 3.84l-3.84 0.48c-1.92 0.48-3.36 0.48-5.28 0.96-5.76 0.96-12 1.44-17.76 1.92l-4.32 0.48c-2.4 0-5.28 0.48-7.68 0.48H500c-2.4 0-5.28-0.48-7.68-0.48l-3.84-0.48c-5.76-0.48-12-0.96-17.76-1.92l-9.6-1.44c-6.24-0.96-12.96-2.4-19.2-3.84l-4.32-1.44-4.8-1.44c-6.24-1.44-12-3.36-18.24-5.28-1.92-0.48-3.36-1.44-6.24-2.4l-9.12-3.36-11.52-4.32c-3.84-1.44-7.68-3.84-12.96-6.24l-8.64-4.32c-0.96-0.48-2.4-0.96-2.4-0.96l-6.24-3.36c-6.24-3.36-12.48-7.2-18.24-11.04l-5.76-3.84c-5.76-3.84-11.52-8.16-16.8-12.96l-3.36-2.4c-6.72-5.76-13.44-11.52-20.64-19.2-5.76-5.76-11.04-12-16.8-18.24l-2.4-2.88c-6.24-7.68-11.04-14.4-14.88-20.16l-1.92-2.88c-3.36-4.8-6.24-10.08-9.12-15.36l-2.88-5.76-1.92-3.84c-1.44-2.4-2.4-4.8-3.84-7.2-1.44-3.84-3.36-7.2-4.8-11.04-0.96-1.92-1.44-3.84-2.4-6.24-1.44-4.32-2.88-8.64-4.32-12.48l-1.44-5.28c-1.44-4.32-2.4-9.12-3.36-13.44l-0.96-4.8c-0.96-4.32-1.92-9.12-2.4-13.92l-0.96-6.24c-0.48-3.84-0.96-8.16-1.44-12 0-2.88 0-5.76-0.48-8.64l-0.48-10.08c0-6.72 0.48-12.96 0.96-18.72l1.92-15.84c0.48-4.32 0.96-9.12 1.92-13.92 0.48-3.36 1.44-6.72 2.4-11.52l0.96-4.8c39.84-188.16 236.16-410.88 290.88-469.92 54.72 59.04 251.04 281.76 290.88 469.92l1.44 5.76c0.96 3.36 1.44 7.2 1.92 10.56 0.96 4.8 1.44 9.12 1.92 13.44l1.92 15.36c0.48 6.24 0.96 12.48 0.96 19.2l-0.48 11.04c0 2.4 0 5.28-0.48 7.68 0 3.84-0.48 7.2-0.96 10.56l-0.96 7.68c0 6.24-0.96 10.56-1.92 15.36z"
            fill="#a2a7ac" p-id="3451"></path>
          <path
            d="M826.4 561.92c1.92-5.28 2.4-11.04 2.4-17.28v-26.4c0-12.96-4.32-24.96-12-35.04 5.76-23.52 0.48-48.96-14.88-68.64l-231.84-296.16c-35.04-44.64-103.68-39.84-132 8.64l-229.44 390.72c-12 20.16-13.92 43.68-7.68 64.32-2.88 6.72-4.32 14.4-4.32 22.08v122.4c0 29.76 22.56 54.24 51.36 57.12-0.48 3.36-0.96 6.72-0.96 10.08v1.44c0 27.84 20.16 51.36 47.04 56.64 2.4 24 23.04 43.2 47.52 43.2h24.96c-0.48 2.4-0.96 5.28-0.96 7.68 0 20.16 16.32 36.48 36.48 36.48h249.6c20.16 0 36.48-16.32 36.48-36.48 0-5.28-0.96-10.56-3.36-14.88h29.76c30.24 0 54.72-23.52 57.6-52.8 9.6-10.56 15.84-24 15.84-39.36v-1.44c0-3.36-0.48-6.24-0.96-9.6h0.96c31.68 0 57.6-25.92 57.6-57.6v-122.4c0-16.8-7.68-32.16-19.2-42.72z m-62.88 78.24c0 2.4 0 4.8-0.48 7.68 0 2.88-0.48 5.76-0.96 8.64l-0.96 7.2c-0.48 3.84-1.44 7.68-1.92 11.52l-0.96 3.84c-0.96 3.84-1.92 7.68-2.88 12l-1.44 4.32c-0.96 3.84-2.4 7.2-3.84 11.04l-1.44 4.32c-1.92 4.32-2.88 7.2-4.32 10.56-0.96 2.4-1.92 4.8-3.36 6.72l-3.84 7.68c-2.4 4.32-4.8 8.64-7.68 13.44-4.8 7.2-8.64 12.96-13.92 19.2l-1.92 2.4c-4.8 5.76-9.12 11.04-13.92 15.84-6.24 6.24-11.52 11.04-17.28 15.84l-2.88 2.4c-4.8 3.84-9.12 7.2-13.92 10.56l-4.8 3.36c-5.28 3.36-10.56 6.72-15.84 9.6l-2.4 1.44-6.72 3.36-4.32 1.92c-3.84 1.92-7.2 3.84-11.04 5.28l-11.52 4.32c-3.84 1.44-6.72 1.92-9.12 1.92-8.64 0-16.8-5.76-19.68-13.92-1.92-5.28-1.44-11.04 0.96-16.32s6.72-9.12 12-11.04l2.4-0.96c2.88-0.96 5.76-1.92 8.64-3.36 2.88-1.44 5.28-2.4 8.16-3.84l12-6.24c4.8-2.4 8.64-5.28 12.96-7.68l4.32-2.88 11.52-8.64 2.4-1.92c4.32-3.84 9.12-7.68 13.44-12 4.8-4.8 8.64-9.12 12.48-13.44l1.44-1.92c4.32-5.28 7.68-10.08 11.04-14.88l0.48-0.96c2.4-4.32 4.8-7.68 6.24-11.04l2.4-4.32c1.92-3.84 2.88-5.76 3.84-7.2 1.44-2.4 2.4-5.28 3.36-7.68l1.44-4.32 2.88-8.64 0.96-3.84c0.96-2.88 1.44-5.76 2.4-9.12l0.48-3.36c0.48-2.88 1.44-6.24 1.44-9.12l0.48-4.8c0.48-2.4 0.48-5.28 0.96-7.68V632.48c0-4.32 0-8.64-0.48-13.44l-1.44-10.08c-0.96-5.28 0.96-11.04 4.32-15.36 3.36-4.8 8.64-7.2 14.4-8.16 4.8-0.96 11.04 0.96 15.36 4.32 4.32 3.36 7.68 8.64 8.16 14.4l1.44 11.04c0.48 6.24 0.96 11.52 0.96 17.28l-0.48 7.68z"
            fill="#a2a7ac" p-id="3452"></path>
        </svg>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      picIndex: 0, // 当前展示图片下标
      setTime: "",
    };
  },
  props: {
    imgArray: {
      type: Array,
    },
    switchPic: {
      type: Boolean,
    },
  },
  created() {
    this.setTime = setTimeout(this.xunhuan, 4000);
  },
  watch: {
    switchPic(newValue) {
      if (newValue) {
        this.setTime = setTimeout(this.xunhuan, 4000);
      } else {
        clearTimeout(this.setTime);
      }
    },
  },
  methods: {
    xunhuan() {
      if (this.picIndex + 1 <= this.imgArray.length - 1) {
        this.$refs.picBox.style.transform = `translateX(-${
          (this.picIndex + 1) * 1032
        }px)`;
        this.picIndex++;
      } else {
        this.picIndex = 0;
        this.$refs.picBox.style.transform = `translateX(0)`;
      }
      this.setTime = setTimeout(this.xunhuan, 4000);
    },
    changeImg(index) {
      this.picIndex = index;
      let length = index * 1032;
      // if (length) {
      this.moveBox(length);
      // }
    },
    moveBox(length) {
      // eslint-disable-next-line no-debugger
      this.$refs.picBox.style.transform = `translateX(-${length}px)`;
    },
  },
};
</script>

<style lang="scss" scoped>
#rotation {
  position: relative;
  overflow: hidden;
  width: 1032px;
  height: 807px;
  border-radius: 8px;
  .content {
    display: flex;
    width: 100%;
    height: 100%;
    transition: transform 0.5s;
    .img-box {
      width: 100%;
      height: 100%;
      flex: 0 0 auto;
      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 1s;
        &:hover {
          transform: scale(1.1);
        }
      }
    }
  }
  .anchor-box {
    position: absolute;
    width: 100%;
    height: 24px;
    bottom: 20px;
    display: flex;
    justify-content: center;
    .div-checked {
      background-color: rgba(216, 216, 216, 1);
    }
    div {
      cursor: pointer;
      width: 28px;
      height: 28px;
      background-color: rgba($color: #d8d8d8, $alpha: 0.5);
      margin-right: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      &:hover {
        background-color: rgba($color: #f1f1f1, $alpha: 0.5);
      }
      svg {
        fill: red;
      }
    }
  }
}
</style>